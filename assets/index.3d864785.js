var $=Object.defineProperty,B=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var F=(e,t,r)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))U.call(t,r)&&F(e,r,t[r]);if(k)for(var r of k(t))z.call(t,r)&&F(e,r,t[r]);return e},x=(e,t)=>B(e,K(t));import{p as Q,c as W,a as H,b as J,d as X,t as Y,j as s,e as N,f as d,r as u,g as Z,h as C,q as b,u as T,i as S,k as ee,l as _,m as R,n as L,F as I,o as te,T as w,D,s as se,S as re,R as ne,v as ae,w as oe,P as ie,B as le}from"./vendor.08eb7476.js";const ce=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}};ce();var p;(function(e){e.GET_EVENTS_LOADING="GET_EVENTS_LOADING",e.GET_EVENTS_SUCCESS="GET_EVENTS_SUCCESS",e.GET_EVENTS_FAIL="GET_EVENTS_FAIL",e.SET_EVENT_OFFSET="SET_EVENT_OFFSET",e.RESET_EVENTS_DATA="RESET_EVENTS_DATA"})(p||(p={}));const de={loading:!0,events:[],offset:0,error:""},ue=Q((e,t)=>{switch(t.type){case p.GET_EVENTS_LOADING:e.loading=!0;break;case p.GET_EVENTS_SUCCESS:{const{items:r}=t.payload;e.loading=!1,e.events=[...e.events,...r];break}case p.GET_EVENTS_FAIL:{e.loading=!1,e.error=`${t.payload}`;break}case p.SET_EVENT_OFFSET:{e.offset=parseInt(t.payload,10);break}case p.RESET_EVENTS_DATA:{e.loading=!0,e.events=[],e.error="",e.offset=0;break}}},de),pe=W({events:ue}),me=H(pe,J(X(Y)));function V({data:e,columns:t,children:r,idExtractor:i,className:n="",rowClickHandler:a}){return s("div",{className:N("flex flex-col",n),children:s("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:s("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:d("div",{className:"overflow-hidden border-gray-200",children:[d("table",{className:"min-w-full divide-y divide-gray-200",children:[s("thead",{className:"bg-gray-50",children:s("tr",{children:t.map(o=>s("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o.header},`th_${o.header}`))})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:e==null?void 0:e.map(o=>s("tr",{className:N(a&&"cursor-pointer"),onClick:l=>a&&a(l,o),children:t.map((l,c)=>{const m=typeof l.value!="function"?o[l.value]:l.value(o);return s("td",{className:"px-6 py-4 whitespace-nowrap",children:s("div",{className:"flex items-center",children:m})},`td_${i(o)}_${l.uniqueKey(o,c)}`)})},`tr_${i(o)}`))})]}),r]})})})})}function A({children:e,onClick:t}){return s("button",{type:"button",onClick:t,className:"p-2 pl-5 pr-5 bg-transparent border-2 border-purple-500 text-purple-500 text-lg rounded-lg hover:bg-purple-500 hover:text-gray-100 focus:border-4 focus:border-purple-300",children:e})}function E({className:e}){return s("div",{style:{borderTopColor:"transparent"},className:N("w-12 h-12 border-4 border-purple-400 border-solid rounded-full animate-spin",e)})}E.defaultProps={className:""};function G(e){const t=u.exports.useRef(e),r=u.exports.useRef(0);return Z(e,t.current)||(t.current=e,r.current+=1),u.exports.useMemo(()=>t.current,[r.current])}const O=C.create({baseURL:"https://fyx8bq1lpa.execute-api.eu-central-1.amazonaws.com/Prod",headers:{"Content-type":"application/json"}});O.defaults.headers.common.Authorization=`Basic ${window.btoa("frontend@shyftplan.com:api_test_auth_token")}`;function he(e){const[t,r]=u.exports.useState(""),[i,n]=u.exports.useState(!0),[a,o]=u.exports.useState(null),l=G(e);return u.exports.useEffect(()=>{n(!0);let c=!1;const m=C.CancelToken.source();return(async h=>{try{const f=await O.request(x(y({},h),{cancelToken:m.token}));c||o(f)}catch(f){c||r(f.message)}finally{c||n(!1)}})(l),()=>{c=!0,m.cancel("Cancelling in cleanup")}},[l]),{response:a,error:t,loading:i}}function fe(){return b.parse(T().search)}function ye(){return G(b.parse(T().search))}const q=e=>{const{startDate:t,endDate:r}=e;return{startDate:t?S(t):new Date,endDate:r?S(r):new Date,key:"selection"}},v=e=>ee(S(e),"PPpp"),ge=[{header:"Position",value:e=>e.position.name,uniqueKey:(e,t)=>e.position.id.toString()+t},{header:"Start Time",value:e=>v(e.startsAt),uniqueKey:(e,t)=>e.startsAt+t},{header:"End Time",value:e=>v(e.endsAt),uniqueKey:(e,t)=>e.endsAt+t}],xe=e=>async t=>{try{t({type:p.GET_EVENTS_LOADING});const r=await O.get("/events",{params:y({},e)});t({type:p.GET_EVENTS_SUCCESS,payload:r.data})}catch(r){t({type:p.GET_EVENTS_FAIL,payload:r.message})}},P=()=>({type:p.RESET_EVENTS_DATA}),Ee=e=>({type:p.SET_EVENT_OFFSET,payload:e}),ve=e=>e.events,Ne=e=>e.events.offset,j=10;function be(){const e=_(),t=ye(),r=R(),{loading:i,events:n}=L(ve),a=L(Ne);u.exports.useEffect(()=>{r(xe(x(y({},t),{offset:a,limit:j})))},[t,r,a]),u.exports.useEffect(()=>()=>{r(P())},[r]);const o=(l,c)=>{const{id:m}=c;e.push(`/event/${m}`)};return s(I,{children:n.length?s(V,{data:n,className:"overflow-auto",columns:ge,rowClickHandler:o,idExtractor:l=>l.id.toString(),children:s("div",{className:"flex justify-center",children:i?s(E,{}):s(A,{onClick:()=>r(Ee(a+j)),children:"Load More"})})}):s("div",{className:"flex justify-center",children:i?s(E,{}):"No Events found!"})})}const Te=[{header:"ID",value:({id:e})=>e.toString(),uniqueKey:({id:e})=>e.toString()},{header:"Name",value:({firstName:e,lastName:t,image:r})=>d(I,{children:[s("div",{className:"flex-shrink-0 h-10 w-10",children:s("img",{className:"h-10 w-10 rounded-full",src:r,alt:""})}),s("div",{className:"ml-4",children:d("div",{className:"text-sm font-medium text-gray-900",children:[e," ",t]})})]}),uniqueKey:({firstName:e,lastName:t},r)=>`${e}-${t}-${r}`}];function Se(){const e=_(),{id:t}=te(),{loading:r,error:i,response:n}=he({url:`/events/${+t}`});if(r||i)return s("div",{className:"flex justify-center",children:r?s(E,{}):"No Details found"});const{position:a,startsAt:o,endsAt:l,employees:c}=(n==null?void 0:n.data)||{};return d("div",{className:"bg-white shadow overflow-auto sm:rounded-lg",children:[d("div",{className:"px-4 py-5 sm:px-6 my-2",children:[d("h2",{className:"flex justify-between text-base my-3 text-indigo-600 font-semibold tracking-wide uppercase",children:["Event Details",s(A,{onClick:()=>e.goBack(),children:"Go Back!"})]}),s("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:a==null?void 0:a.name}),d("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:["Starts At: ",v(o||"")]}),d("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:["Ends At: ",v(l||"")]})]}),d("div",{className:"border-t border-gray-200 px-6 my-2",children:[s("h2",{className:"text-base my-3 text-indigo-600 font-semibold tracking-wide uppercase",children:"Employees"}),(c==null?void 0:c.length)?s(V,{data:c,columns:Te,idExtractor:({id:m})=>m.toString()}):s("div",{className:"flex justify-center my-10",children:"No Employees in this event."})]})]})}function _e(){return d("div",{className:"border-t border-gray-200 text-center pt-8",children:[s("h1",{className:"text-9xl font-bold text-purple-400",children:"404"}),s("h1",{className:"text-6xl font-medium py-8",children:"Oops! Page not found"})]})}const we=[{path:"/",exact:!0,component:be},{path:"/event/:id",exact:!0,component:Se},{path:"*",exact:!0,component:_e}];function De({children:e}){return d("div",{className:"flex justify-between flex-shrink-0 px-8 py-4 border-gray-300",children:[s("img",{className:"h-10",alt:"Shyftplan Logo",src:"https://shyftplan.com/resources/images/shyftplan-logo.svg"}),e]})}function Ae({isOpen:e,closeModal:t}){const r=_(),i=fe(),n=R(),[a,o]=u.exports.useState(()=>q(i)),l=g=>{const{startDate:h,endDate:f}=g.selection;o(M=>x(y({},M),{startDate:h,endDate:f}))},c=()=>{t(),o(y({},q(i)))},m=()=>{n(P()),t();const{startDate:g,endDate:h}=a,f=b.stringify(x(y({},i),{startDate:g==null?void 0:g.toISOString(),endDate:h==null?void 0:h.toISOString()}));r.push(`?${f}`)};return s(w,{appear:!0,show:e,as:u.exports.Fragment,children:s(D,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:c,children:d("div",{className:"min-h-screen px-4 text-center",children:[s(w.Child,{as:u.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s(D.Overlay,{className:"fixed inset-0"})}),s("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"\u200B"}),s(w.Child,{as:u.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:d("div",{className:"inline-block w-full max-w-max p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[s(D.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-3 pb-3 border-b",children:"Select Date Filters"}),s(se.DateRangePicker,{ranges:[a],onChange:l,rangeColors:["#9864f6"]}),s("div",{className:"mt-4 text-right",children:s("button",{type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-purple-900 bg-purple-100 border border-transparent rounded-md hover:bg-purple-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-purple-500",onClick:m,children:"Submit"})})]})})]})})})}const Oe="/",ke=()=>{const e=T(),[t,r]=u.exports.useState(!1);return d("div",{className:"flex flex-col w-screen h-screen px-4",children:[s(De,{children:e.pathname===Oe&&s(A,{onClick:()=>r(!t),children:"Select Date Filters"})}),s(re,{children:we.map(i=>s(ne,{path:i.path,exact:i.exact,component:i.component},i.path))}),s(Ae,{isOpen:t,closeModal:()=>r(!t)})]})};ae.render(s(oe.StrictMode,{children:s(ie,{store:me,children:s(le,{children:s(ke,{})})})}),document.getElementById("root"));
